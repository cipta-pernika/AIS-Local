CREATE OR REPLACE VIEW recent_vessels_positions AS
SELECT 
    v.id AS vessel_id,   
    v.vessel_name,      
    v.mmsi,             
    p.id AS position_id, 
    p.latitude,
    p.longitude,
    p.created_at
FROM 
    ais_data_positions p
JOIN 
    ais_data_vessels v 
ON 
    v.id = p.vessel_id
WHERE
    CONVERT_TZ(p.created_at, 'UTC', 'Asia/Jakarta') >= NOW() - INTERVAL 5 MINUTE
LIMIT 10;
