// resources/js/aismaps.js
function leafletAISMaps() {
  let markerClusterEnabled = false;
  let markers;
  let map;
  return {
    init: async function() {
      map = L.map(this.$refs.map.id).setView(
        [-1.5499571228201094, 117.89427962462793],
        5.4
      );
      const tiles = L.tileLayer.provider("OpenStreetMap.Mapnik").addTo(map);
      const baseLayers = {
        OpenStreetMap: tiles
        // Add other base layers here
      };
      try {
        const response = await axios.get(
          "https://ksop.cakrawala.id/api/aisdataunique"
        );
        const aisData = response.data.message;
        markers = createMarkers(aisData, markerClusterEnabled);
        map.addLayer(markers);
      } catch (error) {
        console.error("Error fetching AIS data:", error);
      }
      map.on("load", function() {
      });
      map.pm.setGlobalOptions({ optIn: false });
      map.pm.addControls({
        position: "topleft",
        drawMarker: false
        // Disable drawing markers (use your cluster markers instead)
      });
      L.control.locate().addTo(map);
      L.terminator().addTo(map);
      setInterval(function() {
        terminator.setTime();
      }, 6e4);
      const sidebar = L.control.sidebar({
        autopan: false,
        closeButton: true,
        container: "sidebar",
        position: "left"
      }).addTo(map);
      sidebar.addPanel({
        id: "Content",
        tab: '<i class="fa fa-info"></i>',
        pane: `
                       <button id="toggleMarkerCluster">Toggle Marker Cluster</button>`,
        title: "Sidebar",
        position: "top"
      });
      L.control.layers(baseLayers).addTo(map);
      document.getElementById("toggleMarkerCluster").addEventListener("click", async function() {
        markerClusterEnabled = !markerClusterEnabled;
        map.removeLayer(markers);
        try {
          const response = await axios.get(
            "https://ksop.cakrawala.id/api/aisdataunique"
          );
          const aisData = response.data.message;
          markers = createMarkers(aisData, markerClusterEnabled);
          map.addLayer(markers);
        } catch (error) {
          console.error("Error fetching AIS data:", error);
        }
      });
    }
  };
}
function createMarkers(data, markerClusterEnabled) {
  const newMarkers = markerClusterEnabled ? L.markerClusterGroup() : L.featureGroup();
  data.forEach((aisItem) => {
    const marker = L.marker([
      aisItem.latitude,
      aisItem.longitude
    ]).bindPopup(`AIS Data: ${JSON.stringify(aisItem)}`);
    if (aisItem.is_inside_geofence === 1) {
      const pulsingIcon = L.icon.pulse({
        iconSize: [10, 10],
        color: "red",
        fillColor: "red",
        animate: true,
        pulseColor: "red"
      });
      marker.setIcon(pulsingIcon);
    }
    newMarkers.addLayer(marker);
  });
  return newMarkers;
}
export {
  leafletAISMaps as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYWlzbWFwcy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGVhZmxldEFJU01hcHMoKSB7XG4gICAgbGV0IG1hcmtlckNsdXN0ZXJFbmFibGVkID0gZmFsc2U7XG4gICAgbGV0IG1hcmtlcnM7XG4gICAgbGV0IG1hcDtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtYXAgPSBMLm1hcCh0aGlzLiRyZWZzLm1hcC5pZCkuc2V0VmlldyhcbiAgICAgICAgICAgICAgICBbLTEuNTQ5OTU3MTIyODIwMTA5NCwgMTE3Ljg5NDI3OTYyNDYyNzkzXSxcbiAgICAgICAgICAgICAgICA1LjRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbGVzID0gTC50aWxlTGF5ZXJcbiAgICAgICAgICAgICAgICAucHJvdmlkZXIoXCJPcGVuU3RyZWV0TWFwLk1hcG5pa1wiKVxuICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBiYXNlIGxheWVycyBvYmplY3RcbiAgICAgICAgICAgIGNvbnN0IGJhc2VMYXllcnMgPSB7XG4gICAgICAgICAgICAgICAgT3BlblN0cmVldE1hcDogdGlsZXMsXG4gICAgICAgICAgICAgICAgLy8gQWRkIG90aGVyIGJhc2UgbGF5ZXJzIGhlcmVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEZldGNoIEFJUyBkYXRhIGZyb20gdGhlIEFQSSBhbmQgY3JlYXRlIG1hcmtlcnNcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9rc29wLmNha3Jhd2FsYS5pZC9hcGkvYWlzZGF0YXVuaXF1ZVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhaXNEYXRhID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1hcmtlcnMgb3IgbWFya2VyIGNsdXN0ZXIgYmFzZWQgb24gdGhlIGluaXRpYWwgZGF0YVxuICAgICAgICAgICAgICAgIG1hcmtlcnMgPSBjcmVhdGVNYXJrZXJzKGFpc0RhdGEsIG1hcmtlckNsdXN0ZXJFbmFibGVkKTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciB0byB0aGUgbWFwXG4gICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgQUlTIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFwLm9uKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICAgICAgICAgIC8vIEVuYWJsZSBMZWFmbGV0LUdlb21hbiBvbiB0aGUgbWFwXG4gICAgICAgICAgICBtYXAucG0uc2V0R2xvYmFsT3B0aW9ucyh7IG9wdEluOiBmYWxzZSB9KTsgLy8gU2V0IHRvIGZhbHNlIHRvIGVuYWJsZSBieSBkZWZhdWx0XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBMZWFmbGV0LUdlb21hbiB0b29sYmFyXG4gICAgICAgICAgICBtYXAucG0uYWRkQ29udHJvbHMoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcGxlZnRcIixcbiAgICAgICAgICAgICAgICBkcmF3TWFya2VyOiBmYWxzZSwgLy8gRGlzYWJsZSBkcmF3aW5nIG1hcmtlcnMgKHVzZSB5b3VyIGNsdXN0ZXIgbWFya2VycyBpbnN0ZWFkKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoKS5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICBMLnRlcm1pbmF0b3IoKS5hZGRUbyhtYXApXG5cbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRlcm1pbmF0b3Iuc2V0VGltZSgpO1xuICAgICAgICAgICAgfSwgNjAwMDApOyAvLyBFdmVyeSBtaW51dGVcblxuICAgICAgICAgICAgLy8gQWRkIExlYWZsZXQgU2lkZWJhclxuICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IEwuY29udHJvbFxuICAgICAgICAgICAgICAgIC5zaWRlYmFyKHtcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BhbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IFwic2lkZWJhclwiLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgLy8gQWRkIGEgcGFuZWwgdG8gdGhlIHNpZGViYXJcbiAgICAgICAgICAgIHNpZGViYXIuYWRkUGFuZWwoe1xuICAgICAgICAgICAgICAgIGlkOiBcIkNvbnRlbnRcIixcbiAgICAgICAgICAgICAgICB0YWI6ICc8aSBjbGFzcz1cImZhIGZhLWluZm9cIj48L2k+JyxcbiAgICAgICAgICAgICAgICBwYW5lOiBgXG4gICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ0b2dnbGVNYXJrZXJDbHVzdGVyXCI+VG9nZ2xlIE1hcmtlciBDbHVzdGVyPC9idXR0b24+YCxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJTaWRlYmFyXCIsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwidG9wXCIsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbGF5ZXIgY29udHJvbCBhbmQgYWRkIGl0IHRvIHRoZSBtYXBcbiAgICAgICAgICAgIEwuY29udHJvbC5sYXllcnMoYmFzZUxheWVycykuYWRkVG8obWFwKTtcblxuICAgICAgICAgICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgdGhlIGJ1dHRvbiB0byB0b2dnbGUgTWFya2VyIENsdXN0ZXJcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwidG9nZ2xlTWFya2VyQ2x1c3RlclwiKVxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDbHVzdGVyRW5hYmxlZCA9ICFtYXJrZXJDbHVzdGVyRW5hYmxlZDsgLy8gVG9nZ2xlIHRoZSBzdGF0ZVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBtYXJrZXJzIG9yIG1hcmtlciBjbHVzdGVyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXJzKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGZXRjaCBBSVMgZGF0YSBmcm9tIHRoZSBBUElcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9rc29wLmNha3Jhd2FsYS5pZC9hcGkvYWlzZGF0YXVuaXF1ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWlzRGF0YSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjcmVhdGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciBiYXNlZCBvbiB0aGUgbmV3IGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMgPSBjcmVhdGVNYXJrZXJzKGFpc0RhdGEsIG1hcmtlckNsdXN0ZXJFbmFibGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBtYXJrZXJzIG9yIG1hcmtlciBjbHVzdGVyIHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBBSVMgZGF0YTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIG1hcmtlcnMgb3IgbWFya2VyIGNsdXN0ZXIgYmFzZWQgb24gdGhlIGRhdGEgYW5kIG1hcmtlckNsdXN0ZXJFbmFibGVkXG5mdW5jdGlvbiBjcmVhdGVNYXJrZXJzKGRhdGEsIG1hcmtlckNsdXN0ZXJFbmFibGVkKSB7XG4gICAgY29uc3QgbmV3TWFya2VycyA9IG1hcmtlckNsdXN0ZXJFbmFibGVkXG4gICAgICAgID8gTC5tYXJrZXJDbHVzdGVyR3JvdXAoKVxuICAgICAgICA6IEwuZmVhdHVyZUdyb3VwKCk7XG5cbiAgICBkYXRhLmZvckVhY2goKGFpc0l0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW1xuICAgICAgICAgICAgYWlzSXRlbS5sYXRpdHVkZSxcbiAgICAgICAgICAgIGFpc0l0ZW0ubG9uZ2l0dWRlLFxuICAgICAgICBdKS5iaW5kUG9wdXAoYEFJUyBEYXRhOiAke0pTT04uc3RyaW5naWZ5KGFpc0l0ZW0pfWApO1xuXG4gICAgICAgIGlmIChhaXNJdGVtLmlzX2luc2lkZV9nZW9mZW5jZSA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgcHVsc2luZ0ljb24gPSBMLmljb24ucHVsc2Uoe1xuICAgICAgICAgICAgICAgIGljb25TaXplOiBbMTAsIDEwXSxcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IFwicmVkXCIsXG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwdWxzZUNvbG9yOiBcInJlZFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXJrZXIuc2V0SWNvbihwdWxzaW5nSWNvbik7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdNYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3TWFya2Vycztcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBZSxTQUFSLGlCQUFrQztBQUNyQyxNQUFJLHVCQUF1QjtBQUMzQixNQUFJO0FBQ0osTUFBSTtBQUNKLFNBQU87QUFBQSxJQUNILE1BQU0saUJBQWtCO0FBQ3BCLFlBQU0sRUFBRSxJQUFJLEtBQUssTUFBTSxJQUFJLEVBQUUsRUFBRTtBQUFBLFFBQzNCLENBQUMscUJBQXFCLGtCQUFrQjtBQUFBLFFBQ3hDO0FBQUEsTUFDSjtBQUVBLFlBQU0sUUFBUSxFQUFFLFVBQ1gsU0FBUyxzQkFBc0IsRUFDL0IsTUFBTSxHQUFHO0FBR2QsWUFBTSxhQUFhO0FBQUEsUUFDZixlQUFlO0FBQUE7QUFBQSxNQUVuQjtBQUdBLFVBQUk7QUFDQSxjQUFNLFdBQVcsTUFBTSxNQUFNO0FBQUEsVUFDekI7QUFBQSxRQUNKO0FBQ0EsY0FBTSxVQUFVLFNBQVMsS0FBSztBQUc5QixrQkFBVSxjQUFjLFNBQVMsb0JBQW9CO0FBR3JELFlBQUksU0FBUyxPQUFPO0FBQUEsTUFDeEIsU0FBUyxPQUFPO0FBQ1osZ0JBQVEsTUFBTSw0QkFBNEIsS0FBSztBQUFBLE1BQ25EO0FBRUEsVUFBSSxHQUFHLFFBQVEsV0FBWTtBQUFBLE1BQUMsQ0FBQztBQUc3QixVQUFJLEdBQUcsaUJBQWlCLEVBQUUsT0FBTyxNQUFNLENBQUM7QUFHeEMsVUFBSSxHQUFHLFlBQVk7QUFBQSxRQUNmLFVBQVU7QUFBQSxRQUNWLFlBQVk7QUFBQTtBQUFBLE1BQ2hCLENBQUM7QUFFRCxRQUFFLFFBQVEsT0FBTyxFQUFFLE1BQU0sR0FBRztBQUU1QixRQUFFLFdBQVcsRUFBRSxNQUFNLEdBQUc7QUFFeEIsa0JBQVksV0FBVztBQUNuQixtQkFBVyxRQUFRO0FBQUEsTUFDdkIsR0FBRyxHQUFLO0FBR1IsWUFBTSxVQUFVLEVBQUUsUUFDYixRQUFRO0FBQUEsUUFDTCxTQUFTO0FBQUEsUUFDVCxhQUFhO0FBQUEsUUFDYixXQUFXO0FBQUEsUUFDWCxVQUFVO0FBQUEsTUFDZCxDQUFDLEVBQ0EsTUFBTSxHQUFHO0FBR2QsY0FBUSxTQUFTO0FBQUEsUUFDYixJQUFJO0FBQUEsUUFDSixLQUFLO0FBQUEsUUFDTCxNQUFNO0FBQUE7QUFBQSxRQUVOLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxNQUNkLENBQUM7QUFHRCxRQUFFLFFBQVEsT0FBTyxVQUFVLEVBQUUsTUFBTSxHQUFHO0FBR3RDLGVBQ0ssZUFBZSxxQkFBcUIsRUFDcEMsaUJBQWlCLFNBQVMsaUJBQWtCO0FBQ3pDLCtCQUF1QixDQUFDO0FBR3hCLFlBQUksWUFBWSxPQUFPO0FBR3ZCLFlBQUk7QUFDQSxnQkFBTSxXQUFXLE1BQU0sTUFBTTtBQUFBLFlBQ3pCO0FBQUEsVUFDSjtBQUNBLGdCQUFNLFVBQVUsU0FBUyxLQUFLO0FBRzlCLG9CQUFVLGNBQWMsU0FBUyxvQkFBb0I7QUFHckQsY0FBSSxTQUFTLE9BQU87QUFBQSxRQUN4QixTQUFTLE9BQU87QUFDWixrQkFBUSxNQUFNLDRCQUE0QixLQUFLO0FBQUEsUUFDbkQ7QUFBQSxNQUNKLENBQUM7QUFBQSxJQUNUO0FBQUEsRUFDSjtBQUNKO0FBR0EsU0FBUyxjQUFjLE1BQU0sc0JBQXNCO0FBQy9DLFFBQU0sYUFBYSx1QkFDYixFQUFFLG1CQUFtQixJQUNyQixFQUFFLGFBQWE7QUFFckIsT0FBSyxRQUFRLENBQUMsWUFBWTtBQUN0QixVQUFNLFNBQVMsRUFBRSxPQUFPO0FBQUEsTUFDcEIsUUFBUTtBQUFBLE1BQ1IsUUFBUTtBQUFBLElBQ1osQ0FBQyxFQUFFLFVBQVUsYUFBYSxLQUFLLFVBQVUsT0FBTyxDQUFDLEVBQUU7QUFFbkQsUUFBSSxRQUFRLHVCQUF1QixHQUFHO0FBQ2xDLFlBQU0sY0FBYyxFQUFFLEtBQUssTUFBTTtBQUFBLFFBQzdCLFVBQVUsQ0FBQyxJQUFJLEVBQUU7QUFBQSxRQUNqQixPQUFPO0FBQUEsUUFDUCxXQUFXO0FBQUEsUUFDWCxTQUFTO0FBQUEsUUFDVCxZQUFZO0FBQUEsTUFDaEIsQ0FBQztBQUNELGFBQU8sUUFBUSxXQUFXO0FBQUEsSUFDOUI7QUFFQSxlQUFXLFNBQVMsTUFBTTtBQUFBLEVBQzlCLENBQUM7QUFFRCxTQUFPO0FBQ1g7IiwKICAibmFtZXMiOiBbXQp9Cg==
