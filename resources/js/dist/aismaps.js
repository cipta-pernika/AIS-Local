// resources/js/aismaps.js
function leafletAISMaps() {
  let markerClusterEnabled = false;
  let markers;
  let map;
  return {
    init: async function() {
      map = L.map(this.$refs.map.id).setView(
        [-1.5499571228201094, 117.89427962462793],
        5.4
      );
      const tiles = L.tileLayer.provider("OpenStreetMap.Mapnik").addTo(map);
      const baseLayers = {
        OpenStreetMap: tiles
        // Add other base layers here
      };
      try {
        const response = await axios.get(
          "https://ksop.cakrawala.id/api/aisdataunique"
        );
        const aisData = response.data.message;
        markers = createMarkers(aisData, markerClusterEnabled);
        map.addLayer(markers);
      } catch (error) {
        console.error("Error fetching AIS data:", error);
      }
      map.on("load", function() {
      });
      map.pm.setGlobalOptions({ optIn: false });
      map.pm.addControls({
        position: "topleft",
        drawMarker: false
        // Disable drawing markers (use your cluster markers instead)
      });
      L.control.locate().addTo(map);
      const sidebar = L.control.sidebar({
        autopan: false,
        closeButton: true,
        container: "sidebar",
        position: "left"
      }).addTo(map);
      sidebar.addPanel({
        id: "Content",
        tab: '<i class="fa fa-info"></i>',
        pane: `
                       <button id="toggleMarkerCluster">Toggle Marker Cluster</button>`,
        title: "Sidebar",
        position: "top"
      });
      L.control.layers(baseLayers).addTo(map);
      document.getElementById("toggleMarkerCluster").addEventListener("click", async function() {
        markerClusterEnabled = !markerClusterEnabled;
        map.removeLayer(markers);
        try {
          const response = await axios.get(
            "https://ksop.cakrawala.id/api/aisdataunique"
          );
          const aisData = response.data.message;
          markers = createMarkers(aisData, markerClusterEnabled);
          map.addLayer(markers);
        } catch (error) {
          console.error("Error fetching AIS data:", error);
        }
      });
    }
  };
}
function createMarkers(data, markerClusterEnabled) {
  const newMarkers = markerClusterEnabled ? L.markerClusterGroup() : L.featureGroup();
  data.forEach((aisItem) => {
    const marker = L.marker([
      aisItem.latitude,
      aisItem.longitude
    ]).bindPopup(`AIS Data: ${JSON.stringify(aisItem)}`);
    if (aisItem.is_inside_geofence === 1) {
      const pulsingIcon = L.icon.pulse({
        iconSize: [10, 10],
        color: "red",
        fillColor: "red",
        animate: true,
        pulseColor: "red"
      });
      marker.setIcon(pulsingIcon);
    }
    newMarkers.addLayer(marker);
  });
  return newMarkers;
}
export {
  leafletAISMaps as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYWlzbWFwcy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGVhZmxldEFJU01hcHMoKSB7XHJcbiAgICBsZXQgbWFya2VyQ2x1c3RlckVuYWJsZWQgPSBmYWxzZTtcclxuICAgIGxldCBtYXJrZXJzO1xyXG4gICAgbGV0IG1hcDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtYXAgPSBMLm1hcCh0aGlzLiRyZWZzLm1hcC5pZCkuc2V0VmlldyhcclxuICAgICAgICAgICAgICAgIFstMS41NDk5NTcxMjI4MjAxMDk0LCAxMTcuODk0Mjc5NjI0NjI3OTNdLFxyXG4gICAgICAgICAgICAgICAgNS40XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0aWxlcyA9IEwudGlsZUxheWVyXHJcbiAgICAgICAgICAgICAgICAucHJvdmlkZXIoXCJPcGVuU3RyZWV0TWFwLk1hcG5pa1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBiYXNlIGxheWVycyBvYmplY3RcclxuICAgICAgICAgICAgY29uc3QgYmFzZUxheWVycyA9IHtcclxuICAgICAgICAgICAgICAgIE9wZW5TdHJlZXRNYXA6IHRpbGVzLFxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIG90aGVyIGJhc2UgbGF5ZXJzIGhlcmVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZldGNoIEFJUyBkYXRhIGZyb20gdGhlIEFQSSBhbmQgY3JlYXRlIG1hcmtlcnNcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9rc29wLmNha3Jhd2FsYS5pZC9hcGkvYWlzZGF0YXVuaXF1ZVwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWlzRGF0YSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciBiYXNlZCBvbiB0aGUgaW5pdGlhbCBkYXRhXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJzID0gY3JlYXRlTWFya2VycyhhaXNEYXRhLCBtYXJrZXJDbHVzdGVyRW5hYmxlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBtYXJrZXJzIG9yIG1hcmtlciBjbHVzdGVyIHRvIHRoZSBtYXBcclxuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihtYXJrZXJzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBBSVMgZGF0YTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtYXAub24oXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHt9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEVuYWJsZSBMZWFmbGV0LUdlb21hbiBvbiB0aGUgbWFwXHJcbiAgICAgICAgICAgIG1hcC5wbS5zZXRHbG9iYWxPcHRpb25zKHsgb3B0SW46IGZhbHNlIH0pOyAvLyBTZXQgdG8gZmFsc2UgdG8gZW5hYmxlIGJ5IGRlZmF1bHRcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBMZWFmbGV0LUdlb21hbiB0b29sYmFyXHJcbiAgICAgICAgICAgIG1hcC5wbS5hZGRDb250cm9scyh7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3BsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICBkcmF3TWFya2VyOiBmYWxzZSwgLy8gRGlzYWJsZSBkcmF3aW5nIG1hcmtlcnMgKHVzZSB5b3VyIGNsdXN0ZXIgbWFya2VycyBpbnN0ZWFkKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoKS5hZGRUbyhtYXApO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIExlYWZsZXQgU2lkZWJhclxyXG4gICAgICAgICAgICBjb25zdCBzaWRlYmFyID0gTC5jb250cm9sXHJcbiAgICAgICAgICAgICAgICAuc2lkZWJhcih7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BhbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VCdXR0b246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcInNpZGViYXJcIixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvKG1hcCk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSBwYW5lbCB0byB0aGUgc2lkZWJhclxyXG4gICAgICAgICAgICBzaWRlYmFyLmFkZFBhbmVsKHtcclxuICAgICAgICAgICAgICAgIGlkOiBcIkNvbnRlbnRcIixcclxuICAgICAgICAgICAgICAgIHRhYjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxyXG4gICAgICAgICAgICAgICAgcGFuZTogYFxyXG4gICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ0b2dnbGVNYXJrZXJDbHVzdGVyXCI+VG9nZ2xlIE1hcmtlciBDbHVzdGVyPC9idXR0b24+YCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNpZGViYXJcIixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGxheWVyIGNvbnRyb2wgYW5kIGFkZCBpdCB0byB0aGUgbWFwXHJcbiAgICAgICAgICAgIEwuY29udHJvbC5sYXllcnMoYmFzZUxheWVycykuYWRkVG8obWFwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBidXR0b24gdG8gdG9nZ2xlIE1hcmtlciBDbHVzdGVyXHJcbiAgICAgICAgICAgIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ0b2dnbGVNYXJrZXJDbHVzdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDbHVzdGVyRW5hYmxlZCA9ICFtYXJrZXJDbHVzdGVyRW5hYmxlZDsgLy8gVG9nZ2xlIHRoZSBzdGF0ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlclxyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXJzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggQUlTIGRhdGEgZnJvbSB0aGUgQVBJXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8va3NvcC5jYWtyYXdhbGEuaWQvYXBpL2Fpc2RhdGF1bmlxdWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhaXNEYXRhID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjcmVhdGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciBiYXNlZCBvbiB0aGUgbmV3IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VycyA9IGNyZWF0ZU1hcmtlcnMoYWlzRGF0YSwgbWFya2VyQ2x1c3RlckVuYWJsZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBtYXJrZXJzIG9yIG1hcmtlciBjbHVzdGVyIHRvIHRoZSBtYXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBBSVMgZGF0YTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciBiYXNlZCBvbiB0aGUgZGF0YSBhbmQgbWFya2VyQ2x1c3RlckVuYWJsZWRcclxuZnVuY3Rpb24gY3JlYXRlTWFya2VycyhkYXRhLCBtYXJrZXJDbHVzdGVyRW5hYmxlZCkge1xyXG4gICAgY29uc3QgbmV3TWFya2VycyA9IG1hcmtlckNsdXN0ZXJFbmFibGVkXHJcbiAgICAgICAgPyBMLm1hcmtlckNsdXN0ZXJHcm91cCgpXHJcbiAgICAgICAgOiBMLmZlYXR1cmVHcm91cCgpO1xyXG5cclxuICAgIGRhdGEuZm9yRWFjaCgoYWlzSXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hcmtlciA9IEwubWFya2VyKFtcclxuICAgICAgICAgICAgYWlzSXRlbS5sYXRpdHVkZSxcclxuICAgICAgICAgICAgYWlzSXRlbS5sb25naXR1ZGUsXHJcbiAgICAgICAgXSkuYmluZFBvcHVwKGBBSVMgRGF0YTogJHtKU09OLnN0cmluZ2lmeShhaXNJdGVtKX1gKTtcclxuXHJcbiAgICAgICAgaWYgKGFpc0l0ZW0uaXNfaW5zaWRlX2dlb2ZlbmNlID09PSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHB1bHNpbmdJY29uID0gTC5pY29uLnB1bHNlKHtcclxuICAgICAgICAgICAgICAgIGljb25TaXplOiBbMTAsIDEwXSxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcInJlZFwiLFxyXG4gICAgICAgICAgICAgICAgZmlsbENvbG9yOiBcInJlZFwiLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHB1bHNlQ29sb3I6IFwicmVkXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYXJrZXIuc2V0SWNvbihwdWxzaW5nSWNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXdNYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbmV3TWFya2VycztcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQWUsU0FBUixpQkFBa0M7QUFDckMsTUFBSSx1QkFBdUI7QUFDM0IsTUFBSTtBQUNKLE1BQUk7QUFDSixTQUFPO0FBQUEsSUFDSCxNQUFNLGlCQUFrQjtBQUNwQixZQUFNLEVBQUUsSUFBSSxLQUFLLE1BQU0sSUFBSSxFQUFFLEVBQUU7QUFBQSxRQUMzQixDQUFDLHFCQUFxQixrQkFBa0I7QUFBQSxRQUN4QztBQUFBLE1BQ0o7QUFFQSxZQUFNLFFBQVEsRUFBRSxVQUNYLFNBQVMsc0JBQXNCLEVBQy9CLE1BQU0sR0FBRztBQUdkLFlBQU0sYUFBYTtBQUFBLFFBQ2YsZUFBZTtBQUFBO0FBQUEsTUFFbkI7QUFHQSxVQUFJO0FBQ0EsY0FBTSxXQUFXLE1BQU0sTUFBTTtBQUFBLFVBQ3pCO0FBQUEsUUFDSjtBQUNBLGNBQU0sVUFBVSxTQUFTLEtBQUs7QUFHOUIsa0JBQVUsY0FBYyxTQUFTLG9CQUFvQjtBQUdyRCxZQUFJLFNBQVMsT0FBTztBQUFBLE1BQ3hCLFNBQVMsT0FBTztBQUNaLGdCQUFRLE1BQU0sNEJBQTRCLEtBQUs7QUFBQSxNQUNuRDtBQUVBLFVBQUksR0FBRyxRQUFRLFdBQVk7QUFBQSxNQUFDLENBQUM7QUFHN0IsVUFBSSxHQUFHLGlCQUFpQixFQUFFLE9BQU8sTUFBTSxDQUFDO0FBR3hDLFVBQUksR0FBRyxZQUFZO0FBQUEsUUFDZixVQUFVO0FBQUEsUUFDVixZQUFZO0FBQUE7QUFBQSxNQUNoQixDQUFDO0FBRUQsUUFBRSxRQUFRLE9BQU8sRUFBRSxNQUFNLEdBQUc7QUFHNUIsWUFBTSxVQUFVLEVBQUUsUUFDYixRQUFRO0FBQUEsUUFDTCxTQUFTO0FBQUEsUUFDVCxhQUFhO0FBQUEsUUFDYixXQUFXO0FBQUEsUUFDWCxVQUFVO0FBQUEsTUFDZCxDQUFDLEVBQ0EsTUFBTSxHQUFHO0FBR2QsY0FBUSxTQUFTO0FBQUEsUUFDYixJQUFJO0FBQUEsUUFDSixLQUFLO0FBQUEsUUFDTCxNQUFNO0FBQUE7QUFBQSxRQUVOLE9BQU87QUFBQSxRQUNQLFVBQVU7QUFBQSxNQUNkLENBQUM7QUFHRCxRQUFFLFFBQVEsT0FBTyxVQUFVLEVBQUUsTUFBTSxHQUFHO0FBR3RDLGVBQ0ssZUFBZSxxQkFBcUIsRUFDcEMsaUJBQWlCLFNBQVMsaUJBQWtCO0FBQ3pDLCtCQUF1QixDQUFDO0FBR3hCLFlBQUksWUFBWSxPQUFPO0FBR3ZCLFlBQUk7QUFDQSxnQkFBTSxXQUFXLE1BQU0sTUFBTTtBQUFBLFlBQ3pCO0FBQUEsVUFDSjtBQUNBLGdCQUFNLFVBQVUsU0FBUyxLQUFLO0FBRzlCLG9CQUFVLGNBQWMsU0FBUyxvQkFBb0I7QUFHckQsY0FBSSxTQUFTLE9BQU87QUFBQSxRQUN4QixTQUFTLE9BQU87QUFDWixrQkFBUSxNQUFNLDRCQUE0QixLQUFLO0FBQUEsUUFDbkQ7QUFBQSxNQUNKLENBQUM7QUFBQSxJQUNUO0FBQUEsRUFDSjtBQUNKO0FBR0EsU0FBUyxjQUFjLE1BQU0sc0JBQXNCO0FBQy9DLFFBQU0sYUFBYSx1QkFDYixFQUFFLG1CQUFtQixJQUNyQixFQUFFLGFBQWE7QUFFckIsT0FBSyxRQUFRLENBQUMsWUFBWTtBQUN0QixVQUFNLFNBQVMsRUFBRSxPQUFPO0FBQUEsTUFDcEIsUUFBUTtBQUFBLE1BQ1IsUUFBUTtBQUFBLElBQ1osQ0FBQyxFQUFFLFVBQVUsYUFBYSxLQUFLLFVBQVUsT0FBTyxDQUFDLEVBQUU7QUFFbkQsUUFBSSxRQUFRLHVCQUF1QixHQUFHO0FBQ2xDLFlBQU0sY0FBYyxFQUFFLEtBQUssTUFBTTtBQUFBLFFBQzdCLFVBQVUsQ0FBQyxJQUFJLEVBQUU7QUFBQSxRQUNqQixPQUFPO0FBQUEsUUFDUCxXQUFXO0FBQUEsUUFDWCxTQUFTO0FBQUEsUUFDVCxZQUFZO0FBQUEsTUFDaEIsQ0FBQztBQUNELGFBQU8sUUFBUSxXQUFXO0FBQUEsSUFDOUI7QUFFQSxlQUFXLFNBQVMsTUFBTTtBQUFBLEVBQzlCLENBQUM7QUFFRCxTQUFPO0FBQ1g7IiwKICAibmFtZXMiOiBbXQp9Cg==
