// resources/js/aismaps.js
function leafletAISMaps() {
  let markerClusterEnabled = false;
  let markers;
  let map;
  return {
    init: async function() {
      map = L.map(this.$refs.map.id).setView(
        [-1.5499571228201094, 117.89427962462793],
        5.4
      );
      const tiles = L.tileLayer.provider("OpenStreetMap.Mapnik").addTo(map);
      const baseLayers = {
        OpenStreetMap: tiles
        // Add other base layers here
      };
      try {
        const response = await axios.get(
          "https://ksop.cakrawala.id/api/aisdataunique"
        );
        const aisData = response.data.message;
        markers = createMarkers(aisData, markerClusterEnabled);
        map.addLayer(markers);
      } catch (error) {
        console.error("Error fetching AIS data:", error);
      }
      map.on("load", function() {
      });
      map.pm.setGlobalOptions({ optIn: false });
      map.pm.addControls({
        position: "topleft",
        drawMarker: false
        // Disable drawing markers (use your cluster markers instead)
      });
      L.control.locate().addTo(map);
      const sidebar = L.control.sidebar({
        autopan: false,
        closeButton: true,
        container: "sidebar",
        position: "left"
      }).addTo(map);
      sidebar.addPanel({
        id: "Content",
        tab: '<i class="fa fa-info"></i>',
        pane: `
                       <button id="toggleMarkerCluster">Toggle Marker Cluster</button>`,
        title: "Sidebar",
        position: "top"
      });
      L.control.layers(baseLayers).addTo(map);
      document.getElementById("toggleMarkerCluster").addEventListener("click", async function() {
        markerClusterEnabled = !markerClusterEnabled;
        map.removeLayer(markers);
        try {
          const response = await axios.get(
            "https://ksop.cakrawala.id/api/aisdataunique"
          );
          const aisData = response.data.message;
          markers = createMarkers(aisData, markerClusterEnabled);
          map.addLayer(markers);
        } catch (error) {
          console.error("Error fetching AIS data:", error);
        }
      });
    }
  };
}
function createMarkers(data, markerClusterEnabled) {
  const newMarkers = markerClusterEnabled ? L.markerClusterGroup() : L.featureGroup();
  data.forEach((aisItem) => {
    const marker = L.marker([
      aisItem.latitude,
      aisItem.longitude
    ]).bindPopup(`AIS Data: ${JSON.stringify(aisItem)}`);
    if (aisItem.is_inside_geofence === 1) {
      const pulsingIcon = L.icon.pulse({
        iconSize: [10, 10],
        color: "red",
        fillColor: "red",
        animate: true,
        pulseColor: "red"
      });
      marker.setIcon(pulsingIcon);
    }
    newMarkers.addLayer(marker);
  });
  return newMarkers;
}
export {
  leafletAISMaps as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYWlzbWFwcy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGVhZmxldEFJU01hcHMoKSB7XG4gICAgbGV0IG1hcmtlckNsdXN0ZXJFbmFibGVkID0gZmFsc2U7XG4gICAgbGV0IG1hcmtlcnM7XG4gICAgbGV0IG1hcDtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtYXAgPSBMLm1hcCh0aGlzLiRyZWZzLm1hcC5pZCkuc2V0VmlldyhcbiAgICAgICAgICAgICAgICBbLTEuNTQ5OTU3MTIyODIwMTA5NCwgMTE3Ljg5NDI3OTYyNDYyNzkzXSxcbiAgICAgICAgICAgICAgICA1LjRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpbGVzID0gTC50aWxlTGF5ZXJcbiAgICAgICAgICAgICAgICAucHJvdmlkZXIoXCJPcGVuU3RyZWV0TWFwLk1hcG5pa1wiKVxuICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBiYXNlIGxheWVycyBvYmplY3RcbiAgICAgICAgICAgIGNvbnN0IGJhc2VMYXllcnMgPSB7XG4gICAgICAgICAgICAgICAgT3BlblN0cmVldE1hcDogdGlsZXMsXG4gICAgICAgICAgICAgICAgLy8gQWRkIG90aGVyIGJhc2UgbGF5ZXJzIGhlcmVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEZldGNoIEFJUyBkYXRhIGZyb20gdGhlIEFQSSBhbmQgY3JlYXRlIG1hcmtlcnNcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9rc29wLmNha3Jhd2FsYS5pZC9hcGkvYWlzZGF0YXVuaXF1ZVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhaXNEYXRhID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1hcmtlcnMgb3IgbWFya2VyIGNsdXN0ZXIgYmFzZWQgb24gdGhlIGluaXRpYWwgZGF0YVxuICAgICAgICAgICAgICAgIG1hcmtlcnMgPSBjcmVhdGVNYXJrZXJzKGFpc0RhdGEsIG1hcmtlckNsdXN0ZXJFbmFibGVkKTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciB0byB0aGUgbWFwXG4gICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgQUlTIGRhdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFwLm9uKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICAgICAgICAgIC8vIEVuYWJsZSBMZWFmbGV0LUdlb21hbiBvbiB0aGUgbWFwXG4gICAgICAgICAgICBtYXAucG0uc2V0R2xvYmFsT3B0aW9ucyh7IG9wdEluOiBmYWxzZSB9KTsgLy8gU2V0IHRvIGZhbHNlIHRvIGVuYWJsZSBieSBkZWZhdWx0XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBMZWFmbGV0LUdlb21hbiB0b29sYmFyXG4gICAgICAgICAgICBtYXAucG0uYWRkQ29udHJvbHMoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcGxlZnRcIixcbiAgICAgICAgICAgICAgICBkcmF3TWFya2VyOiBmYWxzZSwgLy8gRGlzYWJsZSBkcmF3aW5nIG1hcmtlcnMgKHVzZSB5b3VyIGNsdXN0ZXIgbWFya2VycyBpbnN0ZWFkKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEwuY29udHJvbC5sb2NhdGUoKS5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAvLyBBZGQgTGVhZmxldCBTaWRlYmFyXG4gICAgICAgICAgICBjb25zdCBzaWRlYmFyID0gTC5jb250cm9sXG4gICAgICAgICAgICAgICAgLnNpZGViYXIoe1xuICAgICAgICAgICAgICAgICAgICBhdXRvcGFuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogXCJzaWRlYmFyXCIsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImxlZnRcIixcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAvLyBBZGQgYSBwYW5lbCB0byB0aGUgc2lkZWJhclxuICAgICAgICAgICAgc2lkZWJhci5hZGRQYW5lbCh7XG4gICAgICAgICAgICAgICAgaWQ6IFwiQ29udGVudFwiLFxuICAgICAgICAgICAgICAgIHRhYjogJzxpIGNsYXNzPVwiZmEgZmEtaW5mb1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIHBhbmU6IGBcbiAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInRvZ2dsZU1hcmtlckNsdXN0ZXJcIj5Ub2dnbGUgTWFya2VyIENsdXN0ZXI8L2J1dHRvbj5gLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlNpZGViYXJcIixcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3BcIixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBsYXllciBjb250cm9sIGFuZCBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICAgICAgTC5jb250cm9sLmxheWVycyhiYXNlTGF5ZXJzKS5hZGRUbyhtYXApO1xuXG4gICAgICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciB0aGUgYnV0dG9uIHRvIHRvZ2dsZSBNYXJrZXIgQ2x1c3RlclxuICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ0b2dnbGVNYXJrZXJDbHVzdGVyXCIpXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNsdXN0ZXJFbmFibGVkID0gIW1hcmtlckNsdXN0ZXJFbmFibGVkOyAvLyBUb2dnbGUgdGhlIHN0YXRlXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIG1hcmtlcnMgb3IgbWFya2VyIGNsdXN0ZXJcbiAgICAgICAgICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZldGNoIEFJUyBkYXRhIGZyb20gdGhlIEFQSVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2tzb3AuY2FrcmF3YWxhLmlkL2FwaS9haXNkYXRhdW5pcXVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhaXNEYXRhID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNyZWF0ZSBtYXJrZXJzIG9yIG1hcmtlciBjbHVzdGVyIGJhc2VkIG9uIHRoZSBuZXcgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VycyA9IGNyZWF0ZU1hcmtlcnMoYWlzRGF0YSwgbWFya2VyQ2x1c3RlckVuYWJsZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIG1hcmtlcnMgb3IgbWFya2VyIGNsdXN0ZXIgdG8gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKG1hcmtlcnMpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIEFJUyBkYXRhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgbWFya2VycyBvciBtYXJrZXIgY2x1c3RlciBiYXNlZCBvbiB0aGUgZGF0YSBhbmQgbWFya2VyQ2x1c3RlckVuYWJsZWRcbmZ1bmN0aW9uIGNyZWF0ZU1hcmtlcnMoZGF0YSwgbWFya2VyQ2x1c3RlckVuYWJsZWQpIHtcbiAgICBjb25zdCBuZXdNYXJrZXJzID0gbWFya2VyQ2x1c3RlckVuYWJsZWRcbiAgICAgICAgPyBMLm1hcmtlckNsdXN0ZXJHcm91cCgpXG4gICAgICAgIDogTC5mZWF0dXJlR3JvdXAoKTtcblxuICAgIGRhdGEuZm9yRWFjaCgoYWlzSXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbXG4gICAgICAgICAgICBhaXNJdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgYWlzSXRlbS5sb25naXR1ZGUsXG4gICAgICAgIF0pLmJpbmRQb3B1cChgQUlTIERhdGE6ICR7SlNPTi5zdHJpbmdpZnkoYWlzSXRlbSl9YCk7XG5cbiAgICAgICAgaWYgKGFpc0l0ZW0uaXNfaW5zaWRlX2dlb2ZlbmNlID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBwdWxzaW5nSWNvbiA9IEwuaWNvbi5wdWxzZSh7XG4gICAgICAgICAgICAgICAgaWNvblNpemU6IFsxMCwgMTBdLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcInJlZFwiLFxuICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogXCJyZWRcIixcbiAgICAgICAgICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHB1bHNlQ29sb3I6IFwicmVkXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1hcmtlci5zZXRJY29uKHB1bHNpbmdJY29uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld01hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXdNYXJrZXJzO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUFlLFNBQVIsaUJBQWtDO0FBQ3JDLE1BQUksdUJBQXVCO0FBQzNCLE1BQUk7QUFDSixNQUFJO0FBQ0osU0FBTztBQUFBLElBQ0gsTUFBTSxpQkFBa0I7QUFDcEIsWUFBTSxFQUFFLElBQUksS0FBSyxNQUFNLElBQUksRUFBRSxFQUFFO0FBQUEsUUFDM0IsQ0FBQyxxQkFBcUIsa0JBQWtCO0FBQUEsUUFDeEM7QUFBQSxNQUNKO0FBRUEsWUFBTSxRQUFRLEVBQUUsVUFDWCxTQUFTLHNCQUFzQixFQUMvQixNQUFNLEdBQUc7QUFHZCxZQUFNLGFBQWE7QUFBQSxRQUNmLGVBQWU7QUFBQTtBQUFBLE1BRW5CO0FBR0EsVUFBSTtBQUNBLGNBQU0sV0FBVyxNQUFNLE1BQU07QUFBQSxVQUN6QjtBQUFBLFFBQ0o7QUFDQSxjQUFNLFVBQVUsU0FBUyxLQUFLO0FBRzlCLGtCQUFVLGNBQWMsU0FBUyxvQkFBb0I7QUFHckQsWUFBSSxTQUFTLE9BQU87QUFBQSxNQUN4QixTQUFTLE9BQU87QUFDWixnQkFBUSxNQUFNLDRCQUE0QixLQUFLO0FBQUEsTUFDbkQ7QUFFQSxVQUFJLEdBQUcsUUFBUSxXQUFZO0FBQUEsTUFBQyxDQUFDO0FBRzdCLFVBQUksR0FBRyxpQkFBaUIsRUFBRSxPQUFPLE1BQU0sQ0FBQztBQUd4QyxVQUFJLEdBQUcsWUFBWTtBQUFBLFFBQ2YsVUFBVTtBQUFBLFFBQ1YsWUFBWTtBQUFBO0FBQUEsTUFDaEIsQ0FBQztBQUVELFFBQUUsUUFBUSxPQUFPLEVBQUUsTUFBTSxHQUFHO0FBRzVCLFlBQU0sVUFBVSxFQUFFLFFBQ2IsUUFBUTtBQUFBLFFBQ0wsU0FBUztBQUFBLFFBQ1QsYUFBYTtBQUFBLFFBQ2IsV0FBVztBQUFBLFFBQ1gsVUFBVTtBQUFBLE1BQ2QsQ0FBQyxFQUNBLE1BQU0sR0FBRztBQUdkLGNBQVEsU0FBUztBQUFBLFFBQ2IsSUFBSTtBQUFBLFFBQ0osS0FBSztBQUFBLFFBQ0wsTUFBTTtBQUFBO0FBQUEsUUFFTixPQUFPO0FBQUEsUUFDUCxVQUFVO0FBQUEsTUFDZCxDQUFDO0FBR0QsUUFBRSxRQUFRLE9BQU8sVUFBVSxFQUFFLE1BQU0sR0FBRztBQUd0QyxlQUNLLGVBQWUscUJBQXFCLEVBQ3BDLGlCQUFpQixTQUFTLGlCQUFrQjtBQUN6QywrQkFBdUIsQ0FBQztBQUd4QixZQUFJLFlBQVksT0FBTztBQUd2QixZQUFJO0FBQ0EsZ0JBQU0sV0FBVyxNQUFNLE1BQU07QUFBQSxZQUN6QjtBQUFBLFVBQ0o7QUFDQSxnQkFBTSxVQUFVLFNBQVMsS0FBSztBQUc5QixvQkFBVSxjQUFjLFNBQVMsb0JBQW9CO0FBR3JELGNBQUksU0FBUyxPQUFPO0FBQUEsUUFDeEIsU0FBUyxPQUFPO0FBQ1osa0JBQVEsTUFBTSw0QkFBNEIsS0FBSztBQUFBLFFBQ25EO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDVDtBQUFBLEVBQ0o7QUFDSjtBQUdBLFNBQVMsY0FBYyxNQUFNLHNCQUFzQjtBQUMvQyxRQUFNLGFBQWEsdUJBQ2IsRUFBRSxtQkFBbUIsSUFDckIsRUFBRSxhQUFhO0FBRXJCLE9BQUssUUFBUSxDQUFDLFlBQVk7QUFDdEIsVUFBTSxTQUFTLEVBQUUsT0FBTztBQUFBLE1BQ3BCLFFBQVE7QUFBQSxNQUNSLFFBQVE7QUFBQSxJQUNaLENBQUMsRUFBRSxVQUFVLGFBQWEsS0FBSyxVQUFVLE9BQU8sQ0FBQyxFQUFFO0FBRW5ELFFBQUksUUFBUSx1QkFBdUIsR0FBRztBQUNsQyxZQUFNLGNBQWMsRUFBRSxLQUFLLE1BQU07QUFBQSxRQUM3QixVQUFVLENBQUMsSUFBSSxFQUFFO0FBQUEsUUFDakIsT0FBTztBQUFBLFFBQ1AsV0FBVztBQUFBLFFBQ1gsU0FBUztBQUFBLFFBQ1QsWUFBWTtBQUFBLE1BQ2hCLENBQUM7QUFDRCxhQUFPLFFBQVEsV0FBVztBQUFBLElBQzlCO0FBRUEsZUFBVyxTQUFTLE1BQU07QUFBQSxFQUM5QixDQUFDO0FBRUQsU0FBTztBQUNYOyIsCiAgIm5hbWVzIjogW10KfQo=
